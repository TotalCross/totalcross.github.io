(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"1/vT":function(t,e,n){t.exports=n.p+"static/a2-3144e447d51d7d43c8f6ddbcc46564b5.png"},JgSL:function(t,e,n){t.exports=n.p+"static/1.1-8a27651c8f04140bbfac09da786894f3.png"},"UK1/":function(t,e,n){"use strict";n.r(e),n.d(e,"_frontmatter",(function(){return o})),n.d(e,"default",(function(){return b}));var a=n("k1TG"),i=n("8o2o"),r=(n("q1tI"),n("7ljp")),c=n("hhGP"),o=(n("qKvR"),{});void 0!==o&&o&&o===Object(o)&&Object.isExtensible(o)&&!o.hasOwnProperty("__filemeta")&&Object.defineProperty(o,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/docs/md/apis/maps/static-map.md"}});var l={_frontmatter:o},p=c.a;function b(t){var e=t.components,c=Object(i.a)(t,["components"]);return Object(r.b)(p,Object(a.a)({},l,c,{components:e,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"static-map"},"Static Map"),Object(r.b)("p",null,"The static map is an image captured by the request of a navigation REST API. This code uses the GOF build pattern."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Image Sample",src:n("ulbr")})),Object(r.b)("h3",{id:"requirements"},"Requirements"),Object(r.b)("h4",{id:"dependecy"},"Dependecy"),Object(r.b)("p",null,"You need to add in your ",Object(r.b)("strong",{parentName:"p"},"pom file")," within your ",Object(r.b)("strong",{parentName:"p"},"dependencies tag")," the dependency:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-text"}),"<dependencies>\n    .\n    .\n    .\n    <dependency>\n        <groupId>com.totalcross.utils</groupId>\n        <artifactId>tc-utilities</artifactId>\n        <version>0.0.1-SNAPSHOT</version>\n    </dependency>\n\n</dependencies>\n")),Object(r.b)("p",null,"After downloading the dependency it will be necessary to generate the tcz of the dependency so that it is included in the deploy"),Object(r.b)("p",null,"Find the folder that is located in the dependency, usually is: C:\\Users","*","*","your_user","*","*",".","m2\\repository\\com\\totalcross\\utils\\tc-utilities\\0.0.1-SNAPSHOT"),Object(r.b)("p",null,'To generate tcz execute the command java -cp "% TOTALCROSS 3_HOME%" / dist / totalcross-sdk.jar tc.Deploy tc-utilities-0.0.1-SNAPSHOT.jar / r YOUR_TC_KEY'),Object(r.b)("p",null,"After tcz is generated, rename the tc-utilities-0.0.1-SNAPSHOT.tcz file to tc-utilities-0.0.1-SNAPSHOTLib.tcz and place it at the root of the project."),Object(r.b)("p",null,"At the root of the project create the file named all.pkg and put ","[","L","]"," tc-utilities-0.0.1-SNAPSHOTLib.tcz so that this class is included in deploy"),Object(r.b)("p",null,Object(r.b)("img",{alt:"1.1",src:n("JgSL")})),Object(r.b)("h4",{id:"key"},"KEY"),Object(r.b)("p",null,"in the example below, the class was made considering the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.here.com/"}),Object(r.b)("strong",{parentName:"a"},"API HERE")),", to get an ",Object(r.b)("strong",{parentName:"p"},"APP ID")," and ",Object(r.b)("strong",{parentName:"p"},"APP CODE")," you have to register on the site and create a project, going into the details of the project you will find this information."),Object(r.b)("p",null,"The 3 points are only to represent in a more playful way that there are other dependencies\n{% endhint %}"),Object(r.b)("h3",{id:"static-map-structures"},"Static Map Structures"),Object(r.b)("p",null,"in the example below the class was made considering the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.here.com/"}),Object(r.b)("strong",{parentName:"a"},"API HERE")),"*","*","*","*"),Object(r.b)("p",null,"Create in ",Object(r.b)("strong",{parentName:"p"},"util")," package a new class ",Object(r.b)("strong",{parentName:"p"},"StaticMap")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-text"}),"└── src\n    └── main\n        └── java\n            └── com.your_company_name.your_name_app\n                .\n                .\n                .\n                └── util\n                    └── StaticMap\n\n")),Object(r.b)("p",null,"The 3 points are only to represent in a more playful way that there are other package."),Object(r.b)("h3",{id:"static-map-code"},"Static Map Code"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'package <YOUR_PACKAGE_HERE>; // com.your_company_name.your_name_app.util;\n\nimport com.tc.utils.utilities.io.HttpConn;\nimport com.tc.utils.utilities.io.HttpMethod;\nimport totalcross.io.ByteArrayStream;\nimport totalcross.io.IOException;\nimport totalcross.io.Stream;\nimport totalcross.sys.Convert;\nimport totalcross.ui.image.Image;\nimport totalcross.ui.image.ImageException;\n\npublic class StaticMap {\n\n    private String appID;\n    private String codeID;\n    private String andress;\n    private int width;\n    private int height;\n    private int zoom;\n    private int format;\n    private boolean showMapHeader;\n    private String mapStyle;\n    private double latitude = Integer.MAX_VALUE;\n    private double logitude = Integer.MAX_VALUE;\n\n\n    public static final int PNG_FORMAT = 0;\n    public static final int JPEG_FORMAT = 1;\n    public static final int GIF_FORMAT = 2;\n    public static final int BMP_FORMAT = 3;\n    public static final int PNG8_FORMAT = 4;\n    public static final int SVG_FORMAT = 5;\n\n    public static final String ALPS_STYLE = "alps";\n    public static final String DREAMWORKS_STYLE = "dreamworks";\n    public static final String FLAME_STYLE = "flame";\n    public static final String FLEET_STYLE = "fleet";\n    public static final String MINI_STYLE = "mini";\n\n\n    public StaticMap(){\n        andress = "";\n        latitude = logitude = Integer.MAX_VALUE;\n        width = 300;\n        height = 300;\n        zoom = 14;\n        format = PNG_FORMAT;\n        showMapHeader = false;\n        mapStyle = ALPS_Style;\n    }\n\n    public StaticMap(String appID, String codeID){\n        this();\n        this.appID = appID;\n        this.codeID = codeID;\n    }\n\n\n\n    public Image getImage() {\n        Image img = null;\n\n        String req = "https://image.maps.api.here.com/mia/1.6/mapview";\n        req += "?app_id=" + appID;\n        req += "&app_code=" + codeID;\n        if (andress.isEmpty()){\n            req += (logitude != Integer.MAX_VALUE && latitude != Integer.MAX_VALUE) ? "&c=" + latitude + "," + logitude : "";\n        }else{\n            req += "&ci=" + Convert.removeAccentuation(andress).replace("  ", " ").replace(\' \', \'+\');\n        }\n        req += "&h=" + height;\n        req += "&w=" + width;\n        req += "&z=" + zoom;\n        req += "&f=" + format;\n        req += "&i=" + showMapHeader;\n        req += "&style=" + mapStyle;\n\n        try {\n\n            HttpConn conn = new HttpConn(req);\n            conn.setHttpMethod(HttpMethod.GET);\n            Stream stream = conn.connect();\n\n            if (conn.getResponseCode() == 200) {\n\n                byte[] buff = new byte[1024];\n\n                ByteArrayStream bas = new ByteArrayStream(8192);\n\n                while (true) {\n                    int n = stream.readBytes(buff, 0, buff.length);\n                    if (n <= 0) {\n                        break;\n                    }\n                    bas.writeBytes(buff, 0, n);\n                }\n                img = new Image(bas.getBuffer());\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (ImageException e) {\n            e.printStackTrace();\n        }\n        return img;\n    }\n\n\n    public static class Builder {\n\n        StaticMap staticMap = new StaticMap();\n\n        public Builder(){}\n\n        public Builder(String appID, String codeID) {\n            staticMap.appID = appID;\n            staticMap.codeID = codeID;\n        }\n\n        public StaticMap.Builder setAppID(String appID){\n            staticMap.appID = appID;\n            return this;\n        }\n\n        public StaticMap.Builder setCodeID(String codeID){\n            staticMap.codeID = codeID;\n            return this;\n        }\n\n        public StaticMap.Builder setAdress(String location){\n            staticMap.andress = location;\n            return this;\n        }\n\n        public StaticMap.Builder setHeight(int height){\n            staticMap.height = height;\n            return this;\n        }\n\n        public StaticMap.Builder setWidth(int width){\n            staticMap.width = width;\n            return this;\n        }\n\n\n        public StaticMap.Builder setZoom(int zoom){\n            staticMap.zoom = zoom;\n            return this;\n        }\n\n        public StaticMap.Builder setFormat(int format){\n            staticMap.format = format;\n            return this;\n        }\n\n        public StaticMap.Builder setShowMapHeader(boolean showMapHeader){\n            staticMap.showMapHeader = showMapHeader;\n            return this;\n        }\n\n        public StaticMap.Builder setMapStyle(String mapStyle){\n            staticMap.mapStyle = mapStyle;\n            return this;\n        }\n        public StaticMap.Builder setLocation(double latitude, double logitude){\n            staticMap.latitude = latitude;\n            staticMap.logitude = logitude;\n            return this;\n        }\n\n        public StaticMap build(){\n            return staticMap;\n        }\n\n    }\n\n}\n')),Object(r.b)("h4",{id:""},"*","*","*","*"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Atributes"),Object(r.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"String AppID"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),Object(r.b)("a",Object(a.a)({parentName:"td"},{href:"https://app.gitbook.com/@totalcross/s/playbook/~/drafts/-LeKp9rBA6-LbNYmHT6E/primary/apis/maps/static-map#key"}),"Key provided by API to identify APP"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"String CodeID"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),Object(r.b)("a",Object(a.a)({parentName:"td"},{href:"https://app.gitbook.com/@totalcross/s/playbook/~/drafts/-LeKp9rBA6-LbNYmHT6E/primary/apis/maps/static-map#key"}),"Key provided by API to identify APP"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"String adress"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),'It receives an address, as in the example: "Av. Washington Soares, 1321 - Edson Queiroz, Fortaleza - CE, 60811-905"')),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"double latitude"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"it receives a latitude")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"double logitude"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"it receives a latitude")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"int width"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Image width")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"int height"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Image height")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"int zoom"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"The zoom that is applied in the map photo, going from zero ","(","Vision farther",")"," to 21, where 21 will give the view of the whole state and between 0 to 21 it is possible to adjust how close the image is seen.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"int format"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Indicates the format of the image received")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Boolean mapHeader"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Remove or place the map header")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"String mapStyle"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Changes the map style received in the image")))),Object(r.b)("h3",{id:"how-to-use"},"How to use"),Object(r.b)("p",null,"Within the InitUi ","(",")",", you can declare an image and receive its instance by calling the StaticMap getImage method"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'public class Maps extends MainWindow {\n\n    public Maps(){\n        setUIStyle(Settings.Material);\n    }\n\n    @Override\n    public void initUI() {\n        // Cristo Redentor = -22.951916, -43.2126759;\n\n        double lat = -22.951916;\n        double log = -43.2126759;\n\n        int gap = UnitsConverter.toPixels(Control.DP + 16);\n\n        Label lblContact = new Label("Contact");\n        lblContact.setForeColor(0x4286f4);\n        lblContact.setFont(Font.getFont(false,28));\n        add(lblContact, CENTER, TOP + UnitsConverter.toPixels(DP + 50));\n\n        Label lblName = new Label("Christ the Redeemer:");\n        lblName.setFont(Font.getFont(false,20));\n        add(lblName, LEFT + gap, AFTER + UnitsConverter.toPixels(DP + 20));\n\n        Label lblAdress = new Label("National Park of Tijuca - Alto da Boa Vista, Rio de Janeiro - RJ");\n        lblAdress.setFont(Font.getFont(false,14));\n        lblAdress.autoSplit = true;\n        add(lblAdress, LEFT + gap, AFTER + UnitsConverter.toPixels(DP + 20));\n\n        StaticMap staticMap = new StaticMap.Builder("Fola4mnv4rVDbjzo3Obu", "6Xgu6eVAmLKOPLZXZgy5-Q")\n                .setLocation(lat,log)\n                .setWidth(Settings.screenWidth - 2 * gap)\n                .setHeight(Settings.screenHeight / 3)\n                .setZoom(17)\n                .build();\n\n        ImageControl imgC = new ImageControl(staticMap.getImage())  ;\n        add(imgC, LEFT + gap, AFTER + UnitsConverter.toPixels(DP + 10));\n\n        Button btn = new Button("Navegate");\n        btn.addPressListener(e -> {\n            String vsEndereco = "geo:"+ lat + "," + log + "?q=" + lat + "," + log;\n            Vm.exec("url", vsEndereco,  0, true);\n        });\n        btn.setFont(Font.getFont(false,18));\n        add(btn, CENTER, AFTER + UnitsConverter.toPixels(DP + 30));\n\n    }\n}\n')),Object(r.b)("p",null,Object(r.b)("img",{alt:"a2",src:n("1/vT")})),Object(r.b)("h2",{id:"references"},"References"),Object(r.b)("p",null,"See this link for more information abount ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"http://www.w3sdesign.com/"}),"GOF patterns"),"."))}void 0!==b&&b&&b===Object(b)&&Object.isExtensible(b)&&!b.hasOwnProperty("__filemeta")&&Object.defineProperty(b,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/docs/md/apis/maps/static-map.md"}}),b.isMDXComponent=!0},ulbr:function(t,e,n){t.exports=n.p+"static/mapview-cf2c182427b7671f07d0f0529661195b.png"}}]);
//# sourceMappingURL=component---src-docs-md-apis-maps-static-map-md-7d61f4b0eb1fb2d08ff0.js.map