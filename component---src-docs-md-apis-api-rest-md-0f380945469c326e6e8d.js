(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{mN0s:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return b})),n.d(t,"default",(function(){return l}));var a=n("k1TG"),r=n("8o2o"),s=(n("q1tI"),n("7ljp")),i=n("hhGP"),b=(n("qKvR"),{});void 0!==b&&b&&b===Object(b)&&Object.isExtensible(b)&&!b.hasOwnProperty("__filemeta")&&Object.defineProperty(b,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/docs/md/apis/api-rest.md"}});var o={_frontmatter:b},c=i.a;function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(s.b)(c,Object(a.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"api-rest"},"API Rest"),Object(s.b)("h3",{id:"verbs"},"Verbs"),Object(s.b)("p",null,"HTTP verbs are the request methods we use along with the endpoints to access a particular api route."),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Endpoint"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Verbs"),Object(s.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Action"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"/get"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"GET"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Retrieves new information")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"/post"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"POST"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Create new information")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"/put"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"PUT"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Change an information")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"/delete"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"DELETE"),Object(s.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Delete information")))),Object(s.b)("h3",{id:"requisitions"},"Requisitions"),Object(s.b)("p",null,"One of the ways to make requests is to create ",Object(s.b)("strong",{parentName:"p"},"PressListener")," for Button, in the example below I will demonstrate how to get the response of the request in a variable and display in a Label"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'//String uri = Requisition URL\n//HttpMethod httpMethod = HTTP Verbs\n    PressListener getPressListener(final String url, String httpType) {\n        return (e) -> {\n            //msg variable will be responsible for storing the request response\n            String msg = "";\n\n            try {\n\n                HttpStream.Options options = new HttpStream.Options();\n                options.httpType = httpType;\n\n                HttpStream httpStream = new HttpStream(new URI(url), options);\n                ByteArrayStream bas = new ByteArrayStream(4096);\n                bas.readFully(httpStream, 10, 2048);\n                String data = new String(bas.getBuffer(), 0, bas.available());\n\n                Response<ResponseData> response = new Response<>();\n                response.responseCode = httpStream.responseCode;\n\n                if (httpStream.responseCode == 200){\n                        response.data = (JSONFactory.parse(data, ResponseData.class));\n\n                        //Accessing the answer and picking up the information.\n                        msg += "Url: " + response.data.getUrl() + "\\n";\n                        msg += "Origin: " + response.data.getOrigin();\n                }\n            } catch (IOException e1) {\n                    msg = "erro";\n            } catch (InstantiationException ex) {\n                ex.printStackTrace();\n            } catch (InvocationTargetException ex) {\n                ex.printStackTrace();\n            } catch (NoSuchMethodException ex) {\n                ex.printStackTrace();\n            } catch (IllegalAccessException ex) {\n                ex.printStackTrace();\n            }\n\n            lblResult.setText(msg);\n            lblResult.setRect(KEEP, KEEP, PREFERRED, PREFERRED);\n\n        };\n    }\n\n    public static class Response<T> {\n        public T data;\n        public int responseCode;\n    }\n\n')),Object(s.b)("p",null,"Creating the packet to receive the response in order to handle the data obtained from the request"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-text"}),"└── src\n    └── main\n        └── java\n            └── com.your_company_name.your_name_app\n                .\n                .\n                .\n                └── ResponseData\n                    └── Args\n                    └── ResponseData\n")),Object(s.b)("p",null,"and now create the class to store the information"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"package com.totalcross.RestApi.ResponseData;\n\npublic class ResponseData {\n\n    Args args;\n    String origin;\n    String url;\n\n    public Args getArgs() {\n        return args;\n    }\n\n    public void setArgs(Args args) {\n        this.args = args;\n    }\n\n    public String getOrigin() {\n        return origin;\n    }\n\n    public void setOrigin(String origin) {\n        this.origin = origin;\n    }\n\n    public String getUrl() {\n        return url;\n    }\n\n    public void setUrl(String url) {\n        this.url = url;\n    }\n}\n\n\n")),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"package com.totalcross.RestApi.ResponseData;\n\npublic class Args {\n\n    private String args;\n\n    public String getArgs() {\n        return args;\n    }\n\n    public void setArgs(String args) {\n        this.args = args;\n    }\n\n}\n\n\n")),Object(s.b)("p",null,"Now just put that pressListener on your button by changing only the endpoint and the verb, see the example below"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'@Override\n    public void initUI() {\n        String binUrl = "http://httpbin.org";\n\n        Button btnGet = new Button("GET");\n        btnGet.addPressListener(getPressListener(binUrl + "/get", HttpStream.GET));\n        add(btnGet, LEFT, AFTER, FILL, fmH * 3);\n\n        Button btnPost = new Button("POST");\n        btnPost.addPressListener(getPressListener(binUrl + "/post", HttpStream.POST));\n        add(btnPost, LEFT, AFTER, FILL, fmH * 3);\n\n        Button btnPut = new Button("PUT");\n        btnPut.addPressListener(getPressListener(binUrl + "/put", HttpStream.PUT));\n        add(btnPut, LEFT, AFTER, FILL, fmH * 3);\n\n        Button btnDelete = new Button("DELETE");\n        btnDelete.addPressListener(getPressListener(binUrl + "/delete", HttpStream.DELETE));\n        add(btnDelete, LEFT, AFTER, FILL, fmH * 3);\n\n\n        lblResult = new Label(" ");\n        add(lblResult, LEFT, AFTER);\n    }\n')),Object(s.b)("h3",{id:"references"},"References"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"See the complete API code remainder with TotalCross in ",Object(s.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/TotalCross/ApiSample"}),"GitHub"),".")))}void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/docs/md/apis/api-rest.md"}}),l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-md-apis-api-rest-md-0f380945469c326e6e8d.js.map