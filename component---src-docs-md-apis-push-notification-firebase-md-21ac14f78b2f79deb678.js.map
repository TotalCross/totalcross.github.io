{"version":3,"sources":["webpack:///./src/docs/md/.gitbook/assets/image25.png","webpack:///./src/docs/md/.gitbook/assets/sdds.png","webpack:///./src/docs/md/.gitbook/assets/criar-um-projeto-android.png","webpack:///./src/docs/md/.gitbook/assets/captura-de-tela-86.png","webpack:///./src/docs/md/.gitbook/assets/registrar-app.png","webpack:///./src/docs/md/.gitbook/assets/captura-de-tela-80-1.png","webpack:///./src/docs/md/apis/push-notification-firebase.md","webpack:///./src/docs/md/.gitbook/assets/image122.png"],"names":["module","exports","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","alt","src","require","isMDXComponent"],"mappings":"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","file":"component---src-docs-md-apis-push-notification-firebase-md-21ac14f78b2f79deb678.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/image25-1f4352162517a3a0816cd68ddcfcff49.png\";","module.exports = __webpack_public_path__ + \"static/sdds-995ac58fa8ca0745b03e4541d7cd3066.png\";","module.exports = __webpack_public_path__ + \"static/criar-um-projeto-android-7e1dd70cca653433e55fa72ff05b3dc6.png\";","module.exports = __webpack_public_path__ + \"static/captura-de-tela-86-de9dc22f54d8fe97bd9253bd289a4204.png\";","module.exports = __webpack_public_path__ + \"static/registrar-app-424b1b453870bf1088f586851af690ad.png\";","module.exports = __webpack_public_path__ + \"static/captura-de-tela-80-1-3fa391db89c06843f36ed890ffdee293.png\";","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/nrisbakk/Projects/newTC/totalcross-github-io/totalcross.github.io/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"push-notification-firebase\"\n    }}>{`Push Notification Firebase`}</h1>\n    <p>{`We can judge as notifications as and in some cases with the same irritant. But even so, dates remain one of the most efficient ways to interact with your users and ensure their return to your application.`}</p>\n    <p>{`You can use Firebase as a basis to send a notification to the user of your mobile application.`}</p>\n    <h2 {...{\n      \"id\": \"what-is-firebase\"\n    }}>{`What is Firebase?`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://firebase.google.com/?gclid=Cj0KCQjw4fHkBRDcARIsACV58_GiXRpyAtn5fhmrMzOek0nBNHGtA9H2KEFg05N8C_qKtm2aPU34FGQaAqrsEALw_wcB\"\n      }}>{`Firebase`}</a>{` is a platform that offers several services for both mobile and web applications. With this technology, you can incrementally add to your app several functions in a simple and fast way.`}</p>\n    <p>{`When it comes to notification, TotalCross uses the service called `}<strong parentName=\"p\">{`Cloud Messaging`}</strong>{`.`}</p>\n    {\n      /* {% hint style=\"info\" %} */\n    }\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://firebase.google.com/docs/cloud-messaging/?hl=en-us\"\n      }}>{`Firebase Cloud Messaging `}{`(`}{`FCM`}{`)`}</a>{` is a message solution between platforms, allowing you to send notifications reliably and cost-effectively.`}</p>\n    {\n      /* {% endhint %} */\n    }\n    <p>{`Until now, there were no binding to get the Firebase Identitity Token, but `}<strong parentName=\"p\">{`as of TotalCross 3.43 for Android`}</strong>{` and `}<strong parentName=\"p\">{`TotalCross 4.1.0 for iOS`}</strong>{`, we finally finish these binds!`}</p>\n    <h2 {...{\n      \"id\": \"configuring-the-environment\"\n    }}>{`Configuring the Environment`}</h2>\n    <h3 {...{\n      \"id\": \"creating-a-totalcross-project\"\n    }}>{`Creating a TotalCross Project.`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Create a `}<strong parentName=\"li\">{`Maven project`}</strong>{` called `}<strong parentName=\"li\">{`PushNotification_Firebase`}</strong>{` and configure pom.xml to use TotalCross.`}</li>\n    </ul>\n    <p>{`If you `}<strong parentName=\"p\">{`don't know`}</strong>{` how to create and configure a Maven project, log in below:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create a package called `}<strong parentName=\"li\">{`pushnotification_firebase`}</strong>{`, and then create a class with the same name. This class will be our `}<strong parentName=\"li\">{`MainWindow`}</strong>{`.`}</li>\n    </ul>\n    <p><img alt=\"image122\" src={require(\"../.gitbook/assets/image122.png\")} /></p>\n    <p>{`Within the PushNotification_Firebase, create a `}<strong parentName=\"p\">{`static String`}</strong>{` named `}<strong parentName=\"p\">{`firebaseToken`}</strong>{`. And within the method, we will use the command `}<inlineCode parentName=\"p\">{`FirebaseInstanceId.getInstance().GetToken();`}</inlineCode>{` to get the token. In addition, we'll add a message to be printed on the console to show the token. In the end, it will look like this:`}</p>\n    {\n      /* {% code title=\"PushNotification\\_Firebase.java\" %} */\n    }\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`public static String firebaseToken;\n\n    public PushNotification_Firebase() {\n        firebaseToken = FirebaseInstanceId.getInstance().getToken();\n        System.out.println(\"FIREBASE TOKEN: \" + firebaseToken);\n    }\n`}</code></pre>\n    {\n      /* {% endcode %} */\n    }\n    {\n      /* {% hint style=\"info\" %} */\n    }\n    <p>{`This token is needed to send a unicast message to a single device, or to identify that device so that we can create a group to send messages. So let's start with the basics and then go toward the identification of a single device to send a custom message for it.`}</p>\n    {\n      /* {% endhint %} */\n    }\n    <ul>\n      <li parentName=\"ul\">{`Okay, done that, let's create a static block to set the application ID of your application through the `}<inlineCode parentName=\"li\">{`applicationID`}</inlineCode>{` attribute. In android this is called `}<strong parentName=\"li\">{`APP Bundle`}</strong>{`. With this, our PushNotification_Firebase class will look like this:`}</li>\n    </ul>\n    {\n      /* {% code title=\"PushNotification.java\" %} */\n    }\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`public class PushNotification_Firebase extends MainWindow {\n    public static String firebaseToken;\n\n    public PushNotification_Firebase() {\n        firebaseToken = FirebaseInstanceId.getInstance().getToken();\n        System.out.println(\"FIREBASE TOKEN: \" + firebaseToken);\n    }\n\n    static{\n        Settings.applicationId = \"TCFB\";\n    }\n}\n`}</code></pre>\n    {\n      /* {% endcode %} */\n    }\n    <p>{`{% hint style=\"warning\" %}\nthe chosen Id must always be a string with 4 letters. This id is very important because the name of our Android project should be totalcross.app . Do not worry, let's get better at the next step!`}</p>\n    {\n      /* {% endhint %} */\n    }\n    <ul>\n      <li parentName=\"ul\">{`Finally, check if your project has a folder named `}<strong parentName=\"li\">{`target`}</strong>{`, otherwise, create a folder named target in the same location as the pom.xml, src, and .settings file.`}</li>\n    </ul>\n    <p><img alt=\"image25\" src={require(\"../.gitbook/assets/image25.png\")} /></p>\n    <h3 {...{\n      \"id\": \"creating-a-firebase-project\"\n    }}>{`Creating a Firebase project`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Go to `}<a parentName=\"li\" {...{\n          \"href\": \"https://firebase.google.com/\"\n        }}>{`Firebase`}</a>{` website and click \"Go to Console,\" and then click \"Create New Project.\" Let's call it \"Push Notification\"`}</li>\n    </ul>\n    <p><img alt=\"captura80-1\" src={require(\"../.gitbook/assets/captura-de-tela-80-1.png\")} /></p>\n    <p>{`Then you can click on \"Create project\" and then \"Continue\".`}</p>\n    <p>{`You will be redirected to an overview of your project, where you will click on the Android icon that is in the banner of the page, as shown in the image below:`}</p>\n    <p><img alt=\"como criar um projeto android\" src={require(\"../.gitbook/assets/criar-um-projeto-android.png\")} /></p>\n    <ul>\n      <li parentName=\"ul\">{`A form will appear for you to fill out. In the first step, Register App, you only need to fill in the name of the Android package. Here you must fill in with `}<strong parentName=\"li\">{`totalcross.app`}{`<`}{`Settings.applicationID`}{`>`}</strong>{` that you filled in the previous step. In this case, it will be called `}<strong parentName=\"li\">{`totalcross.appTCFB`}</strong>{`. You can then click Register App.`}</li>\n    </ul>\n    <p><img alt=\"registrar-app\" src={require(\"../.gitbook/assets/registrar-app.png\")} /></p>\n    <ul>\n      <li parentName=\"ul\">{`The second step is quite simple, just click to download the file `}<strong parentName=\"li\">{`google-services.json`}</strong>{` and then copy the file and paste inside the `}<strong parentName=\"li\">{`target`}</strong>{` folder, within your project and then click `}<strong parentName=\"li\">{`next`}</strong>{`.`}</li>\n    </ul>\n    {\n      /* {% hint style=\"warning\" %} */\n    }\n    <p>{`If you are deploying to Android and TotalCross can't find google-servoces.json, it will tell you that Firebase won't work with this message:`}</p>\n    <p>{`\"Could not find 'google-services.json', thus Firebase will be ignored further on\"`}</p>\n    {\n      /* {% endhint %} */\n    }\n    <p><img alt=\"captura-de-tela-86\" src={require(\"../.gitbook/assets/captura-de-tela-86.png\")} /></p>\n    <ul>\n      <li parentName=\"ul\">{`Step 3 is just to Gradle, so we can `}<strong parentName=\"li\">{`click next`}</strong></li>\n      <li parentName=\"ul\">{`Step 4 will only be possible when we test, so we can click the \"`}<strong parentName=\"li\">{`Skip step`}</strong>{`\" option.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"implementation\"\n    }}>{`Implementation`}</h2>\n    <p>{`Now, with the environment set up, we can go back to our `}<inlineCode parentName=\"p\">{`MainWindow`}</inlineCode>{`, the PushNotification_Firebase. Inside it, let's create two more methods: `}<strong parentName=\"p\"><inlineCode parentName=\"strong\">{`onTokenRefresh()`}</inlineCode></strong>{` and `}<strong parentName=\"p\"><inlineCode parentName=\"strong\">{`onMessageReceived()`}</inlineCode></strong>{`.`}</p>\n    <h3 {...{\n      \"id\": \"receiving-token\"\n    }}>{`Receiving Token`}</h3>\n    <p>{`It is through `}<strong parentName=\"p\">{`onTokenRefresh`}{`(`}{`)`}</strong>{` that you will be able to receive the Token to later save and associate with a user. Check out the example below:`}</p>\n    {\n      /* {% code title=\"onTokenRefresh\\(\\)\" %} */\n    }\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`protected FirebaseInstanceIdService initFirebaseInstanceIdService() {\n    return new FirebaseInstanceIdService() {\n        @Override\n        public void onTokenRefresh() {\n            firebaseToken = FirebaseInstanceId.getInstance().getToken();\n            System.out.println(\"Token refresh\");\n        }\n    };\n}\n`}</code></pre>\n    {\n      /* {% endcode %} */\n    }\n    <h3 {...{\n      \"id\": \"receiving-notification\"\n    }}>{`Receiving Notification`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`onMessageReceived()`}</inlineCode>{` method fires every time the APP receives a notification, so to be more illustrative when testing, we will use this method to print to the console which notification was sent. Just copy the code below`}</p>\n    {\n      /* {% code title=\"onMessageReceived\\(\\)\" %} */\n    }\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`    protected FirebaseMessagingService initFirebaseMessagingService() {\n        return new FirebaseMessagingService() {\n            @Override\n            public void onMessageReceived(RemoteMessage remoteMessage) {\n                Vm.debug(\"I was called\");\n                System.out.println((String)remoteMessage.getData().get(\"hello\"));\n            }\n        };\n    }\n`}</code></pre>\n    {\n      /* {% endcode %} */\n    }\n    <h3 {...{\n      \"id\": \"reviewing-pushnotification_firebase-class-extends-mainwindow\"\n    }}>{`Reviewing PushNotification_Firebase class `}{`(`}{`extends MainWindow`}{`)`}</h3>\n    <p>{`And finally, your main class must to be as follows:`}</p>\n    {\n      /* {% code title=\"PushNotification\\_Firebase\" %} */\n    }\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package pushnotification_firebase;\n\nimport totalcross.firebase.FirebaseMessagingService;\nimport totalcross.firebase.RemoteMessage;\nimport totalcross.firebase.iid.FirebaseInstanceId;\nimport totalcross.firebase.iid.FirebaseInstanceIdService;\nimport totalcross.sys.Settings;\nimport totalcross.sys.Vm;\nimport totalcross.ui.MainWindow;\n\npublic class PushNotification_Firebase extends MainWindow {\n    public static String firebaseToken;\n\n    public PushNotification_Firebase() {\n        firebaseToken = FirebaseInstanceId.getInstance().getToken();\n        System.out.println(\"FIREBASE TOKEN: \" + firebaseToken);\n    }\n\n    static{\n        Settings.applicationId = \"TCFB\";\n        Settings.iosCFBundleIdentifier = \"totalcross.appABCD\";\n    }\n\n    @Override\n    protected FirebaseInstanceIdService initFirebaseInstanceIdService() {\n        return new FirebaseInstanceIdService() {\n            @Override\n            public void onTokenRefresh() {\n                firebaseToken = FirebaseInstanceId.getInstance().getToken();\n                System.out.println(\"Token refresh\");\n            }\n        };\n    }\n\n    @Override\n    protected FirebaseMessagingService initFirebaseMessagingService() {\n        return new FirebaseMessagingService() {\n            @Override\n            public void onMessageReceived(RemoteMessage remoteMessage) {\n                Vm.debug(\"I was called\");\n                System.out.println((String) remoteMessage.getData().get(\"hello\"));\n            }\n        };\n    }\n}\n`}</code></pre>\n    {\n      /* {% endcode %} */\n    }\n    <p>{`You are ready to send a first message. The ideal is always first, so keep learning how to submit an application!.`}</p>\n    <h2 {...{\n      \"id\": \"test\"\n    }}>{`Test`}</h2>\n    <p><img alt=\"sdds\" src={require(\"../.gitbook/assets/sdds.png\")} /></p>\n    <h2 {...{\n      \"id\": \"references\"\n    }}>{`References`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`You can check the complete example in the `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/TotalCross/PushNotification_Firebase\"\n        }}>{`GitHub`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`It is also possible to send internal notifications from your app to users. To better understand how this is possible, access the notification session `}{`(`}{`link below`}{`)`}{`.`}</li>\n    </ul>\n    {\n      /* {% page-ref page=\"notifications.md\" %} */\n    }\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","module.exports = __webpack_public_path__ + \"static/image122-c6b1b1f6647af3184b2d35933308a3b0.png\";"],"sourceRoot":""}